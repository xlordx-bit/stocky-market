{% extends "base.html" %}
{% block title %}Dashboard | StockyMarket{% endblock %}

{% block content %}
<section class="dashboard-container animate__animated animate__fadeIn">

  <h2>Welcome, {{ username }}</h2>


  <div class="tabs">
    <button class="tab-button active" data-tab="api-login">API Login</button>
    <button class="tab-button" data-tab="download-data">Download Data</button>
    <button class="tab-button" data-tab="order-taking">Order Taking</button>
  </div>

  <div id="api-login" class="tab-pane active">
    <form>
      <div class="form-grid">        <div class="form-group"><label>API Key</label><input type="text" required></div>
        <div class="form-group"><label>API Secret</label><input type="text" required></div>
        <div class="form-group"><label>API Session</label><input type="text" required></div>
        <div class="form-group">
          <button type="submit">Login</button>
        </div>
      </div>
    </form>
  </div>

  
  <div id="download-data" class="tab-pane">
    <form>
      <div class="form-grid">
        <div class="form-group"><label>Stock Code</label><input type="text" required></div>
        <div class="form-group"><label>Exchange Code</label><input type="text" required></div>
        <div class="form-group"><label>From Date</label><input type="date" required></div>
        <div class="form-group"><label>To Date</label><input type="date" required></div>
        <div class="form-group"><label>Interval</label>
          <select required>
            <option value="">Select</option>
            <option value="1m">1 Minute</option>
            <option value="5m">5 Minutes</option>
            <option value="15m">15 Minutes</option>
            <option value="1h">1 Hour</option>
            <option value="1d">1 Day</option>
            <option value="1w">1 Week</option>
          </select>
        </div>
        <div class="form-group"><label>Product Type</label><input type="text" required></div>
        <div class="form-group"><label>Right</label><input type="text" required></div>
        <div class="form-group"><label>Strike Price Start</label><input type="number" step="0.01" required></div>
        <div class="form-group"><label>Strike Price End</label><input type="number" step="0.01" required></div>
        <div class="form-group"><label>Expiry Date</label><input type="date" required></div>
      </div>
      <button type="submit">Download Data</button>
    </form>
  </div>
  <div id="order-taking" class="tab-pane">
    <form onsubmit="showOrderPopup(event)">
      <div class="form-grid">
        <div class="form-group"><label>Input</label><input type="text" required></div>
        <div class="form-group"><label>Nifty</label><input type="text" required></div>
        <div class="form-group"><label>Call</label><input type="text" required></div>
        <div class="form-group"><label>Put</label><input type="text" required></div>
        <div class="form-group"><label>Order Log</label><input type="text" required></div>
        <div class="form-group"><label>Nifty Slope</label><input type="text" required></div>
        <div class="form-group"><label>Call Slope</label><input type="text" required></div>
        <div class="form-group"><label>Put Slope</label><input type="text" required></div>
        <div class="form-group"><label>Stop Log</label><input type="text" required></div>
        <div class="form-group"><label>Target</label><input type="text" required></div>
      </div>
      <button type="submit">Place Order</button>
    </form>
  </div>

</section>

<div id="order-popup" class="popup">Order Completed!</div>

<style>
  .dashboard-container {
    max-width: 1100px;
    margin: 2rem auto;
    background: #181a1f;
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 0 30px #00a8e8aa;
    color: #e1e1e1;
  }

  h2 {
    text-align: center;
    color: #00a8e8;
    margin-bottom: 1.5rem;
  }

  .tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
    gap: 1rem;
  }

  .tab-button {
    padding: 0.6rem 1.5rem;
    background: #24272e;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s ease;
  }

  .tab-button.active,
  .tab-button:hover {
    background: #00a8e8;
    box-shadow: 0 0 10px #00a8e8cc;
  }

  .tab-pane {
    display: none;
    margin-top: 1rem;
  }

  .tab-pane.active {
    display: block;
  }

  .form-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .form-group {
    flex: 1 1 250px;
    display: flex;
    flex-direction: column;
  }

  label {
    font-weight: 600;
    margin-bottom: 0.3rem;
  }

  input,
  select {
    padding: 0.7rem;
    background: #24272e;
    color: white;
    border: none;
    border-radius: 10px;
  }

  button[type="submit"] {
    margin-top: 1rem;
    padding: 0.8rem 2rem;
    background: #00a8e8;
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 0 15px #00a8e8bb;
  }

  button[type="submit"]:hover {
    background: #0077b6;
  }

  .popup {
    display: none;
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: #00a8e8;
    color: white;
    padding: 1rem 2rem;
    border-radius: 12px;
    font-weight: bold;
    box-shadow: 0 0 20px #00a8e8;
    z-index: 999;
  }

  @media (max-width: 700px) {
    .form-grid {
      flex-direction: column;
    }
  }
</style>

<script>
  document.querySelectorAll('.tab-button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.tab).classList.add('active');
    });
  });

  function showOrderPopup(event) {
    event.preventDefault();
    const popup = document.getElementById('order-popup');
    popup.style.display = 'block';
    setTimeout(() => popup.style.display = 'none', 2000);
  }
</script>
{% endblock %}
